<div class="course-editor">
    <header class="course-editor-hdr row">
        <template v-if="edit_head">
            <div class="input-group col-sm-6">
                <input 
                    class="form-control" 
                    v-model="course_title"
                >
                <span class="input-group-btn">
                    <button 
                        class="btn btn-default" 
                        v-text="labels.save_title" 
                        @click="saveTitle"
                    ></button>
                </span>
            </div>
        </template>
        <template v-else>
            <h3 
                class="course-editor-hed col-sm-6"
                @click="editTitle" 
            >
                <span v-text="course_title"></span>
                <button 
                    class="btn btn-primary btn-xs" 
                    type="button" 
                    :class="[$style['rhy--xStart25']]"
                    @click="editTitle"
                >
                    <span
                        class="glyphicon glyphicon-edit"
                        aria-hidden="true"
                    ></span>
                    <span class="sr-only" v-text="labels.edit_title" ></span>
                </button>
            </h3>
        </template>
    </header>
    <div class="row">
        <div class="course-editor col-sm-9">
            <div>
                <draggable :list="course_sections" :options="{handle: '.handle'}" >
                    <course-section 
                        v-for="section, index in course_sections"
                        :key="section"
                        :resources="section" 
                        :labels="labels"
                    >   
                        <button
                            slot="section-preheading"
                            class="handle"
                            :class="[$style['glyph'], $style['pad--y0'], $style['pad--x25']]"
                        >
                            <span
                                class="glyphicon glyphicon-move"
                                aria-hidden="true"
                            ></span>
                        </button>
                        <button
                            slot="section-postheading"
                            :class="[$style.glyph, $style['iso--xStartAuto']]" 
                            @click="removeSection(index)"
                        >
                            <span class="sr-only" v-text="labels.remove_section"></span>
                            <span
                                class="glyphicon glyphicon-remove"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </course-section>
                </draggable>
                
                <div 
                    class="panel panel-default" 
                    @click="addSection"
                >
                    <button 
                        type="button"
                        :class="[$style['row--pStart--sMiddle'], $style['fake-btn']]"
                    >
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        <span v-text="labels.add_section"></span>
                    </button>
                </div>
            </div>
            
            <div class="btn-group">
                <button 
                    class="btn btn-success" 
                    v-text="labels.save" 
                    @click="saveCourse"
                    :disabled="course_sections.length < 1"
                ></button>
            </div>
        </div>
        <div class="resource-search col-sm-3">
            <div class="input-group">
                <input 
                    class="form-control"  
                    v-model="q"
                >
                <span class="input-group-btn">
                    <button 
                        class="btn btn-info" 
                        @click="searchResources"
                    >Search</button>
                </span>
            </div>
            <div class="list-group">
                <draggable :list="available_resources" :options="{group:'resources'}">
                    <course-resource 
                        class="list-group-item"
                        v-for="resource, index in available_resources"
                        :key="resource"
                        :title="resource.title_en"
                    >
                    </course-resource>
                </draggable>
            </div>
        </div>
    </div>
</div>
